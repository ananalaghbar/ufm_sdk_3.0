<Location /ufm_consumer>
   SSLRequireSSL
   ProxyPass https://127.0.0.1/ufm_web
   ProxyPassReverse https://127.0.0.1/ufm_web
</Location>

<Location /ufmConsumerRestInternal>
    ProxyPass http://127.0.0.1:@@CONSUMER_REST_PORT@@ retry=1 Keepalive=On timeout=300
    ProxyPassReverse http://127.0.0.1:@@CONSUMER_REST_PORT@@
    AuthType Basic
    AuthName "UFM Consumer REST Server"
    WSGIPassAuthorization On
    AuthBasicProvider wsgi
    WSGIAuthUserScript /opt/ufm/scripts/ufm_authentication_scripts/auth.py
    AuthBasicAuthoritative Off
    ErrorDocument 401 /login
    RequestHeader set X-Remote-User "%{REMOTE_USER}s"
    RequestHeader unset X-Forwarded-Server
    Require valid-user
</Location>

RewriteEngine On
RewriteCond %{HTTP_REFERER} /ufm_consumer
RewriteRule ^/ufmRestInternal/(.*)$ http://127.0.0.1/ufmConsumerRestInternal/$1 [P]
